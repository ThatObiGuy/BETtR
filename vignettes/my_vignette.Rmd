---
title: "Getting started with BETtR"
author: "Owen O'Connor, Sorin Bivol, Sean O'Leary, Ivan Cakic"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Getting started with BETtR}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r logo, echo=FALSE, results="asis"}
htmltools::tags$div(
  style = "text-align: center; margin-bottom: 1em;",
  htmltools::tags$img(
    src = "tempLogo.png",
    style = "width: 35%; border: 0; box-shadow: none; padding: 0; background: none;"
  )
)
```

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup, include=FALSE}
suppressPackageStartupMessages(library(bettr))
```

## Introduction

__BETtR__ is an R package designed to work with betting market odds data, providing tools for structuring the odds data in objects, visualising how the odds evolve over time, and supporting exploratory prediction methods for betting odds trajectories.

This package is built around `bettr_data`, which extends a `tsibble` representation of event-level odds data.

This vignette will provide a brief overview of the intended workflow when using __BETtR__.

## Installing BETtR

To install __BETtR__ you first need to install [R](https://cran.r-project.org/). Installing [RStudio](https://posit.co/) as a nice desktop environment for using R is also recommended, however if available the use of an RStudio server should also be suitable.

Once in R you can type:

```{r, eval=FALSE}
install.packages('devtools')
devtools::install_github('ThatObiGuy/BETtR')
```

at the R command prompt to install the latest development version of the package from the __BETtR__ [GitHub page](https://github.com/ThatObiGuy/BETtR).

NOTE: There is no official CRAN release of this package (yet), the above is the only way to install the __BETtR__ package.

Once you have run the above code, proceed with the following:

```{r}
library(bettr)
```

this will load in all the __BETtR__ functions. 

If you find bugs or wish to suggest new features please visit __BETtR__ [GitHub issues page](https://github.com/ThatObiGuy/bettr/issues).

### Creating a BETtR_data object

The base requirement to using this R package is the `make_bettr()` function. This function takes in a data frame containing betting odds and converts it into a `bettr_data` object.

The input data must contain:

* an event id
* logged time
* home, draw, and away odds

```{r, eval=FALSE}
bettr_obj <- make_bettr(raw_odds_data)
```

The return object inherits from `tsibble` and can be used with other methods provided by the package.

### Plotting odds

__BETtR__ provides a plotting method for `bettr_data` objects. Plots percentage change of the odds of a (or many) opening favorite(s) change over time.

```{r, eval=FALSE}
plot(bettr_obj)
```

Odds are scaled relative to their opening value so that the movement across different events can be compared on a common scale.

### Predicting odds movement

`BETtR` provides a prediction method for objects of class `bettr_data` via the S3 method `predict()`.

The prediction interface applies time–series–based models to the odds trajectory of a given event, allowing users to compare different forecasting approaches. Currently implemented models include:

* ARIMA models for autoregressive time-series forecasting
* Exponential smoothing (ETS) models with optional interpolation for irregular time data
* A Skellam–based model designed for discrete odds movements.

The method automatically checks for gaps in the time index and applies interpolation where necessary.

```{r, eval=FALSE}
predict(bettr_obj, h = 67)
```


### Example dataset

The package will include example betting odds datasets that have already been processed into `bettr_data` objects. These datasets can be used to experiment with the package functionality once finalised.

```{r, eval=FALSE}
data(epl_weekend_data)
plot(epl_weekend_data)
```

